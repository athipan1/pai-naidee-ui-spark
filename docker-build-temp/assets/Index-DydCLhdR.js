import{j as e}from"./ui-CYJXyMFH.js";import{r as a}from"./vendor-BtPQM8GQ.js";import{H as t,B as r}from"./BottomNavigation-C9yiQNzY.js";import{h as s,t as n,m as i,f as o,S as l,C as c}from"./floating-market-BY-kAvOE.js";import{A as d}from"./AttractionCard-QoN6DNNe.js";import{c as m,f as g,B as h}from"./index-B3OkbNa5.js";import{R as u,T as x,a5 as p,d as f,S as v,a6 as j}from"./icons-Dm8dLJzq.js";import{O as b}from"./OptimizedImage-afipJHCM.js";import{u as w}from"./useAttractionQueries-BuAHFOVJ.js";import{u as N}from"./router-BKNbbwl4.js";import"./dropdown-menu-CGE9erBO.js";import"./badge-MTT6vMtQ.js";import"./EnhancedToast-DoTOKRv_.js";import"./index-CToq2SLX.js";import"./scroll-area-B3tsxRvT.js";import"./contextualSearchAPI-BpohMIp-.js";import"./mockData-yCUV551o.js";import"./three-Bx_9lKOs.js";import"./query-CekFPK04.js";const k=g("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),y=a.forwardRef(({className:a,variant:t,...r},s)=>e.jsx("div",{ref:s,role:"alert",className:m(k({variant:t}),a),...r}));y.displayName="Alert";a.forwardRef(({className:a,...t},r)=>e.jsx("h5",{ref:r,className:m("mb-1 font-medium leading-none tracking-tight",a),...t})).displayName="AlertTitle";const C=a.forwardRef(({className:a,...t},r)=>e.jsx("div",{ref:r,className:m("text-sm [&_p]:leading-relaxed",a),...t}));C.displayName="AlertDescription";const L=({error:a,isLoading:t=!1,onRetry:r,showRetryButton:s=!0,fallbackMessage:n,currentLanguage:i="en"})=>{if(!a&&!n)return null;const o=(e=>{if(!e)return"generic";const a=e.message.toLowerCase();return a.includes("fetch")||a.includes("network")||a.includes("connection")?"network":a.includes("not found")||a.includes("404")?"not_found":a.includes("500")||a.includes("server")?"server":"generic"})(a),l=(e=>{const a={network:{th:{title:"ไม่สามารถเชื่อมต่อกับเซิร์ฟเวอร์ได้",description:"กรุณาตรวจสอบการเชื่อมต่ออินเทอร์เน็ตของคุณ หรือลองใหม่อีกครั้ง",fallback:"กำลังแสดงข้อมูลตัवอย่างแทน"},en:{title:"Unable to connect to server",description:"Please check your internet connection or try again later",fallback:"Showing sample data instead"}},server:{th:{title:"เซิร์ฟเวอร์กำลังมีปัญหา",description:"เซิร์ฟเวอร์กำลังประสบปัญหาชั่วคราว กรุณาลองใหม่อีกครั้ง",fallback:"กำลังแสดงข้อมูลตัวอย่างแทน"},en:{title:"Server is experiencing issues",description:"The server is temporarily experiencing problems. Please try again",fallback:"Showing sample data instead"}},not_found:{th:{title:"ไม่พบข้อมูลที่คุณต้องการ",description:"ข้อมูลที่คุณกำลังมองหา อาจถูกลบหรือย้ายที่แล้ว",fallback:"กำลังแสดงข้อมูลตัวอย่างแทน"},en:{title:"Data not found",description:"The information you're looking for may have been removed or moved",fallback:"Showing sample data instead"}},generic:{th:{title:"เกิดข้อผิดพลาด",description:"เกิดข้อผิดพลาดในการโหลดข้อมูล กรุณาลองใหม่อีกครั้ง",fallback:"กำลังแสดงข้อมูลตัวอย่างแทน"},en:{title:"Something went wrong",description:"An error occurred while loading data. Please try again",fallback:"Showing sample data instead"}}};return a[e]||a.generic})(o,i);return e.jsx(y,{className:"mb-4 border-orange-200 bg-orange-50 dark:border-orange-800 dark:bg-orange-950",children:e.jsxs("div",{className:"flex items-start gap-3",children:["network"===o?e.jsx(p,{className:"h-4 w-4"}):e.jsx(x,{className:"h-4 w-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs(C,{className:"mb-3",children:[e.jsx("div",{className:"font-medium text-orange-800 dark:text-orange-200 mb-1",children:a?l[i].title:"th"===i?"ใช้ข้อมูลตัวอย่าง":"Using Sample Data"}),e.jsx("div",{className:"text-sm text-orange-700 dark:text-orange-300",children:a?l[i].description:n||l[i].fallback})]}),a&&s&&r&&e.jsx(h,{variant:"outline",size:"sm",onClick:r,disabled:t,className:"border-orange-300 text-orange-800 hover:bg-orange-100 dark:border-orange-700 dark:text-orange-200 dark:hover:bg-orange-900",children:t?e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"mr-2 h-3 w-3 animate-spin"}),"th"===i?"กำลังลองใหม่...":"Retrying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"mr-2 h-3 w-3"}),"th"===i?"ลองใหม่":"Try Again"]})})]})]})})},S=({currentLanguage:m,onLanguageChange:g})=>{const u=N(),[x,p]=a.useState("all"),[k,y]=a.useState([]),[C,S]=a.useState(!1),T=[{id:"1",name:"Phi Phi Islands",nameLocal:"หมู่เกาะพีพี",province:"th"===m?"กระบี่":"Krabi",category:"Beach",rating:4.8,reviewCount:2547,image:s,description:"th"===m?"น้ำทะเลใสและหน้าผาหินปูนที่สวยงาม ทำให้ที่นี่เป็นสวรรค์สำหรับผู้ที่ชื่นชอบชายหาดและการดำน้ำดูปะการัง":"Crystal clear waters and stunning limestone cliffs make this a paradise for beach lovers and snorkeling enthusiasts.",tags:["Beach","Snorkeling","Island","Photography"]},{id:"2",name:"Wat Phra Kaew",nameLocal:"วัดพระแก้ว",province:"th"===m?"กรุงเทพฯ":"Bangkok",category:"Culture",rating:4.9,reviewCount:5243,image:n,description:"th"===m?"วัดที่ศักดิ์สิทธิ์ที่สุดในประเทศไทย เป็นที่ประดิษฐานของพระแก้วมรกต":"The most sacred Buddhist temple in Thailand, home to the revered Emerald Buddha statue.",tags:["Temple","Culture","Buddhism","History"]},{id:"3",name:"Doi Inthanon",nameLocal:"ดอยอินทนนท์",province:"th"===m?"เชียงใหม่":"Chiang Mai",category:"Nature",rating:4.7,reviewCount:1876,image:i,description:"th"===m?"ยอดเขาที่สูงที่สุดในประเทศไทย ชมวิวภูเขาที่งดงาม น้ำตก และอากาศเย็นสบาย":"The highest peak in Thailand offering breathtaking mountain views, waterfalls, and cool weather.",tags:["Mountain","Nature","Hiking","Waterfalls"]},{id:"4",name:"Floating Market",nameLocal:"ตลาดน้ำ",province:"th"===m?"กรุงเทพฯ":"Bangkok",category:"Food",rating:4.5,reviewCount:3156,image:o,description:"th"===m?"สัมผัสวัฒนธรรมไทยแบบดั้งเดิม ขณะช้อปปิ้งผลไม้สดและอาหารพื้นเมืองจากเรือ":"Experience traditional Thai culture while shopping for fresh fruits and local delicacies from boats.",tags:["Food","Culture","Traditional","Market"]}],{data:R,error:B,isLoading:A,refetch:M}=w({page:1,limit:10,category:"all"===x?void 0:x}),P=(null==R?void 0:R.attractions)?R.attractions.map(e=>{var a;return{id:e.id,name:e.name,nameLocal:e.nameLocal||e.name,province:"",category:e.category,rating:e.rating,reviewCount:Math.floor(5e3*Math.random())+1e3,image:(null==(a=e.images)?void 0:a[0])||s,description:`Discover the beauty of ${e.name}`,tags:[e.category]}}):T;a.useEffect(()=>{S(!(null==R?void 0:R.attractions)&&!A)},[R,A]);const D="all"===x?P:P.filter(e=>e.category.toLowerCase()===x.toLowerCase()),F=P.reduce((e,a)=>{const t=a.category.toLowerCase();return e[t]=(e[t]||0)+1,e.all=P.length,e},{}),I=e=>{y(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},$=e=>{u(`/attraction/${e}`)},E=()=>{u("/discover")};return e.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[e.jsx(t,{currentLanguage:m,onLanguageChange:g}),e.jsxs("main",{id:"main-content",role:"main",className:"focus:outline-none",tabIndex:-1,children:[(B||C)&&e.jsx("div",{className:"container mx-auto px-4 pt-4",children:e.jsx(L,{error:B,isLoading:A,onRetry:M,showRetryButton:!!B,fallbackMessage:C?"th"===m?"เซิร์ฟเวอร์ไม่พร้อมใช้งาน กำลังแสดงข้อมูลตัวอย่าง":"Server unavailable. Showing sample data instead.":void 0,currentLanguage:m})}),e.jsx(l,{currentLanguage:m,onSearch:(e,a)=>{const t=new URLSearchParams;t.set("q",e),u(`/search?${t.toString()}`)}}),e.jsx(c,{currentLanguage:m,selectedCategory:x,onCategoryChange:e=>{if("all"===e)u("/discover");else{const a=new URLSearchParams;a.set("mode","category"),a.set("cat",e),u(`/discover?${a.toString()}`)}},attractionCounts:F}),"all"===x&&e.jsx("section",{className:"py-6 bg-accent/20","aria-label":"th"===m?"สถานที่ยอดนิยม":"Trending destinations",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[e.jsx("span",{className:"mr-2",role:"img","aria-label":"fire",children:"🔥"}),"th"===m?"ยอดนิยมในขณะนี้":"Trending Now"]})}),e.jsx("div",{className:"flex overflow-x-auto pb-4 space-x-4 scrollbar-hide",role:"list",children:P.slice(0,2).map(a=>e.jsx("article",{className:"flex-shrink-0 w-64 md:w-72 bg-card rounded-xl p-4 border border-border/50 shadow-sm hover:shadow-md transition-all duration-300 cursor-pointer",onClick:()=>$(a.id),role:"listitem",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),$(a.id))},children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(b,{src:a.image,alt:a.name,loading:"lazy",className:"w-16 h-16 rounded-lg object-cover",width:64,height:64}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium truncate",children:"th"===m&&a.nameLocal?a.nameLocal:a.name}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center",children:[e.jsx(f,{className:"w-3 h-3 mr-1"}),a.province]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(v,{className:"w-3 h-3 fill-accent-yellow text-accent-yellow mr-1"}),e.jsx("span",{className:"text-sm font-medium",children:a.rating}),e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",a.reviewCount,")"]})]})]})]})},`trending-${a.id}`))})]})}),e.jsx("section",{className:"py-8","aria-label":"th"===m?"สถานที่แนะนำ":"Recommended places",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"th"===m?"สถานที่แนะนำ":"Recommended Places"}),e.jsxs(h,{variant:"outline",onClick:E,className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:"th"===m?"ดูทั้งหมด":"View All"}),e.jsx(j,{className:"w-4 h-4"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",role:"list","aria-label":"th"===m?`รายการสถานที่ท่องเที่ยว ${Math.min(D.length,8)} แห่ง`:`Tourist attractions list ${Math.min(D.length,8)} places`,children:D.slice(0,8).map(a=>e.jsx("div",{role:"listitem",children:e.jsx(d,{...a,currentLanguage:m,isFavorite:k.includes(a.id),onFavoriteToggle:I,onCardClick:$})},a.id))}),0===D.length&&e.jsxs("div",{className:"text-center py-12",role:"status","aria-live":"polite",children:[e.jsx("p",{className:"text-muted-foreground text-lg",children:"th"===m?"ไม่พบสถานที่ในหมวดหมู่นี้":"No places found in this category"}),e.jsx(h,{onClick:E,className:"mt-4",children:"th"===m?"สำรวจเพิ่มเติม":"Explore More"})]})]})})]}),e.jsx(r,{currentLanguage:m})]})};export{S as default};
