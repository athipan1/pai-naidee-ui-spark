import{j as e}from"./ui-CYJXyMFH.js";import{r as s}from"./vendor-BtPQM8GQ.js";import{c as t,B as a,C as r,d as n}from"./index-B3OkbNa5.js";import{I as l}from"./index-CToq2SLX.js";import{B as c}from"./badge-MTT6vMtQ.js";import{S as o}from"./scroll-area-B3tsxRvT.js";import{g as i,s as d}from"./contextualSearchAPI-BpohMIp-.js";import{a7 as m,X as x,a8 as h,z as u,p,a9 as g,d as f,aa as j,ab as b,ac as v,ad as N,ae as w,U as y}from"./icons-Dm8dLJzq.js";import{u as S}from"./router-BKNbbwl4.js";const C=({currentLanguage:j,onSearch:b,onSuggestionSelect:v,placeholder:N,className:w,searchType:y="all"})=>{const[S,C]=s.useState(""),[T,E]=s.useState([]),[k,P]=s.useState([]),[z,R]=s.useState([]),[A,D]=s.useState(!1),[L,I]=s.useState(!1),[B,$]=s.useState([]),F=s.useRef(null),K=s.useRef(null),M=s.useRef(null),O=s.useRef(null),U={th:{searchPlaceholder:"ค้นหาสถานที่ท่องเที่ยว...",searchPostsPlaceholder:"ค้นหาโพสต์และสถานที่...",recentSearches:"การค้นหาล่าสุด",trendingSearches:"ยอดนิยม",suggestions:"คำแนะนำ",noSuggestions:"ไม่พบคำแนะนำ",searchResults:"ผลการค้นหา",clearAll:"ล้างทั้งหมด",confidence:"ความเชื่อมั่น",expandedTerms:"คำที่ขยาย",posts:"โพสต์",places:"สถานที่"},en:{searchPlaceholder:"Search destinations...",searchPostsPlaceholder:"Search posts and places...",recentSearches:"Recent Searches",trendingSearches:"Trending",suggestions:"Suggestions",noSuggestions:"No suggestions found",searchResults:"Search Results",clearAll:"Clear All",confidence:"Confidence",expandedTerms:"Expanded Terms",posts:"Posts",places:"Places"}}[j];s.useEffect(()=>{const e=localStorage.getItem("recentSearches");e&&P(JSON.parse(e)),i(j).then(e=>{R(e)})},[j]);const J=s.useCallback(e=>{O.current&&clearTimeout(O.current),O.current=setTimeout(()=>{e.trim().length>0?W():E([])},300)},[]),W=async e=>{M.current&&M.current.abort(),M.current=new AbortController,D(!0);try{E([])}catch{E([])}finally{D(!1)}},q=async e=>{if(e.trim()){D(!0);try{if("posts"===y||"all"===y){const s=await d(e,{language:j,limit:20});$(s.expandedTerms),b(e,s.results)}else{b(e,{results:[],totalCount:0}.results)}const s=[e,...k.filter(s=>s!==e)].slice(0,5);P(s),localStorage.setItem("recentSearches",JSON.stringify(s)),I(!1)}catch(s){b(e,[])}finally{D(!1)}}},G=e=>{C(e),q(e)};s.useEffect(()=>{const e=e=>{F.current&&!F.current.contains(e.target)&&I(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),s.useEffect(()=>()=>{O.current&&clearTimeout(O.current),M.current&&M.current.abort()},[]);const X=s=>{switch(s){case"place":case"province":return e.jsx(f,{className:"w-4 h-4"});case"category":case"tag":return e.jsx(g,{className:"w-4 h-4"});default:return e.jsx(m,{className:"w-4 h-4"})}};return e.jsxs("div",{ref:F,className:t("relative w-full max-w-2xl",w),children:[e.jsxs("form",{onSubmit:e=>{e.preventDefault(),q(S)},className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(m,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),e.jsx(l,{ref:K,type:"text",value:S,onChange:e=>{const s=e.target.value;C(s),I(!0),J(s)},onKeyDown:e=>{var s;"Escape"===e.key&&(I(!1),null==(s=K.current)||s.blur()),"Enter"!==e.key||e.shiftKey||(e.preventDefault(),q(S))},onFocus:()=>I(!0),placeholder:N||("posts"===y?U.searchPostsPlaceholder:U.searchPlaceholder),className:"search-input pl-12 pr-12 h-12 text-base border-2 focus:border-primary touch-manipulation transition-all duration-300","aria-label":N||U.searchPlaceholder,"aria-expanded":L,"aria-haspopup":"listbox",role:"combobox"}),S&&e.jsx(a,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-8 h-8",onClick:()=>{var e;C(""),E([]),null==(e=K.current)||e.focus()},children:e.jsx(x,{className:"w-4 h-4"})}),A&&e.jsx(h,{className:"absolute right-10 top-1/2 transform -translate-y-1/2 w-5 h-5 animate-spin text-primary"})]}),B.length>1&&e.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[e.jsxs("span",{className:"text-xs text-muted-foreground mr-2",children:[U.expandedTerms,":"]}),B.slice(0,5).map((s,t)=>e.jsx(c,{variant:"outline",className:"text-xs",children:s},t)),B.length>5&&e.jsxs(c,{variant:"secondary",className:"text-xs",children:["+",B.length-5]})]})]}),L&&e.jsx(r,{className:"absolute top-full left-0 right-0 mt-2 z-50 shadow-xl border-2 glass-effect animate-slide-down",children:e.jsx(n,{className:"p-0",children:e.jsxs(o,{className:"max-h-96",children:[A&&e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(h,{className:"w-6 h-6 animate-spin mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground animate-pulse",children:"กำลังค้นหา..."})]}),!S&&k.length>0&&e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:U.recentSearches})]}),e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>{P([]),localStorage.removeItem("recentSearches")},className:"text-xs",children:U.clearAll})]}),e.jsx("div",{className:"space-y-1",children:k.map((s,t)=>e.jsx("button",{onClick:()=>G(s),className:"w-full text-left p-2 hover:bg-accent rounded-lg transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:s})]})},t))})]}),!S&&z.length>0&&e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(p,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:U.trendingSearches})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:z.map((s,t)=>e.jsx(c,{variant:"secondary",className:"cursor-pointer hover:bg-primary hover:text-primary-foreground transition-colors",onClick:()=>G(s),children:s},t))})]}),S&&T.length>0&&e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(m,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:U.suggestions})]}),e.jsx("div",{className:"space-y-1",children:T.map(s=>e.jsx("button",{onClick:()=>(e=>{C(e.text),I(!1),null==v||v(e),q(e.text)})(s),className:"w-full text-left p-3 hover:bg-accent rounded-lg transition-colors",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[s.image?e.jsx("img",{src:s.image,alt:s.text,className:"w-10 h-10 object-cover rounded-lg"}):e.jsx("div",{className:"w-10 h-10 bg-accent rounded-lg flex items-center justify-center",children:X(s.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium truncate",children:s.text}),e.jsxs(c,{variant:"outline",className:"text-xs",children:[Math.round(100*s.confidence),"%"]})]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:s.description})]})]})},s.id))})]}),S&&!A&&0===T.length&&e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(m,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:U.noSuggestions})]})]})})})]})},T="/assets/hero-beach-D78hXTNA.jpg",E=({currentLanguage:s,onSearch:t})=>{const a=(e,s)=>{t(e,s)};return e.jsxs("section",{className:"relative min-h-[300px] md:min-h-[500px] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${T})`}}),e.jsx("div",{className:"absolute inset-0 gradient-hero opacity-80"}),e.jsx("div",{className:"relative container mx-auto px-4 py-12 md:py-28 flex flex-col items-center justify-center text-center",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-4 md:space-y-6",children:[e.jsx("h1",{className:"text-3xl md:text-6xl font-bold text-white mb-3 md:mb-4 animate-fade-in text-shadow-strong",children:"th"===s?"ค้นหาสถานที่ท่องเที่ยวในฝัน":"Discover Your Dream Destination"}),e.jsx("p",{className:"text-base md:text-xl text-white/90 mb-6 md:mb-8 font-light animate-fade-in text-shadow",children:"th"===s?"เที่ยวไทยและทั่วโลกไปกับเรา พบสถานที่น่าทึ่งที่รอคุณอยู่":"Explore Thailand and beyond with us. Find amazing places waiting for you."}),e.jsx("div",{className:"animate-fade-in max-w-2xl mx-auto",children:e.jsx(C,{currentLanguage:s,onSearch:a,searchType:"all",placeholder:"th"===s?"คุณอยากไปไหน?":"Where do you want to go?"})}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mt-4 md:mt-6 animate-fade-in",children:[{th:"ชายหาด",en:"Beach"},{th:"วัด",en:"Temple"},{th:"ภูเขา",en:"Mountain"},{th:"น้ำตก",en:"Waterfall"},{th:"เกาะ",en:"Island"}].map((t,r)=>e.jsxs("button",{onClick:()=>a("th"===s?t.th:t.en),className:"px-3 py-1.5 md:px-4 md:py-2 glass-effect hover:bg-white/30 backdrop-blur-sm rounded-full text-white text-sm font-medium transition-all duration-300 hover:scale-105 active:scale-95 touch-manipulation relative overflow-hidden group",children:[e.jsx("span",{className:"relative z-10",children:"th"===s?t.th:t.en}),e.jsx("div",{className:"absolute inset-0 bg-white/10 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-500 ease-out"})]},r))})]})})]})},k=({currentLanguage:s,selectedCategory:t,onCategoryChange:a,attractionCounts:r={}})=>{const n=S(),l=[{id:"all",labelTh:"ทั้งหมด",labelEn:"All",icon:j,color:"text-accent-purple"},{id:"beach",labelTh:"ชายหาด",labelEn:"Beach",icon:b,color:"text-accent-sky"},{id:"nature",labelTh:"ธรรมชาติ",labelEn:"Nature",icon:v,color:"text-accent-green"},{id:"culture",labelTh:"วัฒนธรรม",labelEn:"Culture",icon:N,color:"text-accent-yellow"},{id:"mountain",labelTh:"ภูเขา",labelEn:"Mountain",icon:w,color:"text-muted-foreground"},{id:"food",labelTh:"อาหาร",labelEn:"Food",icon:y,color:"text-secondary"}];return e.jsx("section",{className:"py-8 bg-background",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:"th"===s?"หมวดหมู่ที่น่าสนใจ":"Explore Categories"}),e.jsx("div",{className:"flex overflow-x-auto pb-4 space-x-3 md:space-x-4 scrollbar-hide",children:l.map(l=>{const c=l.icon,o=t===l.id,i=r[l.id]||0;return e.jsxs("button",{onClick:()=>(e=>{if("all"===e)a(e);else{const s=new URLSearchParams;s.set("category",e),n(`/search?${s.toString()}`)}})(l.id),className:`\n                  category-btn flex-shrink-0 flex flex-col items-center p-3 md:p-4 rounded-2xl min-w-[90px] md:min-w-[100px] min-h-[80px] md:min-h-[90px]\n                  transition-all duration-500 hover:scale-105 active:scale-95 touch-manipulation relative overflow-hidden\n                  ${o?"category-btn-active bg-primary text-primary-foreground shadow-xl scale-105":"bg-card hover:bg-accent border border-border shadow-sm hover:shadow-md"}\n                `,children:[e.jsx("div",{className:`\n                  w-10 h-10 md:w-12 md:h-12 rounded-xl flex items-center justify-center mb-2 transition-all duration-300 relative z-10\n                  ${o?"bg-white/20 animate-float":"bg-accent/50 group-hover:bg-primary/20"}\n                `,children:e.jsx(c,{className:"w-5 h-5 md:w-6 md:h-6 transition-all duration-300 "+(o?"text-white animate-glow":`${l.color} group-hover:scale-110`)})}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-center leading-tight relative z-10",children:"th"===s?l.labelTh:l.labelEn}),i>0&&e.jsx("span",{className:"text-xs mt-1 px-1.5 py-0.5 rounded-full transition-all duration-300 relative z-10 "+(o?"bg-white/20 text-white animate-pulse":"bg-primary/10 text-primary hover:bg-primary/20"),children:i}),e.jsx("div",{className:"absolute inset-0 rounded-2xl opacity-0 hover:opacity-100 transition-opacity duration-300",children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent rounded-2xl"})})]},l.id)})})]})})},P="/assets/temple-culture-C6cggLNG.jpg",z="/assets/mountain-nature-D7UruqB3.jpg",R="/assets/floating-market-B0O32Kg4.jpg";export{k as C,E as S,R as f,T as h,z as m,P as t};
